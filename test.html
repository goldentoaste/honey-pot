<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta charset="utf-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
hr { height: 1px; border-width: 0; }
li.unchecked::marker { content: "\2610"; }
li.checked::marker { content: "\2612"; }
</style></head><body style=" font-family:'Roboto'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:7px; margin-bottom:7px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:700;">sad</span>asdsad</p>
<p style=" margin-top:7px; margin-bottom:7px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:700; font-style:italic;">sadsa</span> asdasd</p>
<h4 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:700;">sadsadsa2223123</span></h4>
<p style=" margin-top:7px; margin-bottom:7px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sa</p>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">​​    import html1</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    import os1122</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    import textwrap</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from hashlib import md511</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from os import path</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from random import randint2222</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from time import time</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from typing import List</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from PySide6.QtCore import QMimeData, QSize, QUrl, Signal1111111</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from PySide6.QtGui 1import QImage</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from PySide6.QtWidgets import QTextBrowser, QTextEdit1111</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    11112</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from imageCache import CacheManager</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from syntaxHighlighting import EditorHighlighter, Languages, PreviewHighlighter</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    from utils import cacheLocation11, mdCodeBlockRegex, mdImageRegex</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    3313</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    copyCommand = &quot;copy&quot; if os.name == &quot;nt&quot; else &quot;cp&quot;  # copy for windows, cp for unix systems</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    backSlash = &quot;\\&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    111</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    def cleanSlash(d: str):v</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        &quot;&quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        replaces all the slashes with whichever the os uses</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        &quot;&quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        return d.replace(&quot;\\&quot;, os.sep).replace(&quot;/&quot;, os.sep)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    class MarkdownPreview(QTextBrowser):</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        fileAddedSignal = Signal(str)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        def __init__(self, *args, **kwargs) -&gt; None:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            super().__init__(*args, **kwargs)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.cache = CacheManager(r&quot;C:\\Testing\\cache&quot;, 5)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.blockTypes = []  # python, text, etc</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.allBlockTypes = {</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;python&quot;: Languages.python,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;py&quot;: Languages.python,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;js&quot;: Languages.javascript,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;javascript&quot;: Languages.javascript,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;text&quot;: Languages.text,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;txt&quot;: Languages.text,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            }</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.langHeaderMap = {</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                Languages.text: &quot;\u200b&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                Languages.python: &quot;\u200b\u200b&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                Languages.javascript: &quot;\u200b\u200b\u200b&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            }</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.highlighter = PreviewHighlighter(self.document())</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.document().setIndentWidth(20)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            # Set style</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.setStyleSheet(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                '''</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                QScrollBar{</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    border: 0;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    background: transparent;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    height:15 px;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                }</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                QScrollBar::handle{</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    background: white;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    min-width: 50px;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                }</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                '''</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            )</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        </span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        def setMarkdown(self, markdown: str) -&gt; None:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            # fixing code blocks</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            &quot;========================================================&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            t0 = time()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.blockTypes.clear()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            codeBlocks = mdCodeBlockRegex.findall(markdown)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            block: str</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            for block in codeBlocks:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                langHeader = block[: block.find(&quot;\n&quot;)]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                langType = self.allBlockTypes.get(langHeader, Languages.text)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                block = block[block.find(&quot;\n&quot;) + 1 :]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                block = textwrap.indent(html.escape(block).strip(&quot;\n&quot;).replace(&quot;\\&quot;, &quot;\\\\&quot;), &quot;    &quot;)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                print(self.langHeaderMap[langType].encode(&quot;utf8&quot;))</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                markdown = mdCodeBlockRegex.sub(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    f'&lt;pre style=&quot;background-color:#292828;color:#d4be98;&quot;&gt;\n&lt;p1 style=&quot;font-size: 10pt; font-family: Comic Sans MS; &quot;&gt;\n\n{self.langHeaderMap[langType]}{block}\u200c\n&lt;/p1&gt;&lt;/pre&gt;',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    markdown,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    1,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                )</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            print(&quot;code block processing took&quot;, time() - t0)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            &quot;========================================================&quot;</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            t0 = time()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            super().setMarkdown(markdown)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            print(f&quot;setting markdown took: {time() - t0}&quot;)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            # loading images</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            &quot;========================================================&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            imageLinks = mdImageRegex.findall(markdown)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            for link in imageLinks:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                cachedFile, image = self.cache.getFile(link)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                if cachedFile:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    self.document().addResource(2, QUrl(link), image)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            &quot;========================================================&quot;</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            # # adjust size of contents</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            # self.document().adjustSize()</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">    class MarkdownEditor(QTextEdit):</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        &quot;&quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        class used to inject markdown behaviour into a QTextEdit</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        &quot;&quot;&quot;</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        fileAddedSignal = Signal(str)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        def __init__(self, *args, **kwargs) -&gt; None:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            super().__init__(*args, **kwargs)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.setAcceptRichText(False)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            self.highlighter = EditorHighlighter(self.document())</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        def canInsertFromMimeData(self, source: QMimeData) -&gt; bool:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            return super().canInsertFromMimeData(source)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        def createMimeDataFromSelection(self) -&gt; QMimeData:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            return super().createMimeDataFromSelection()</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">        def insertFromMimeData(self, source: QMimeData) -&gt; None:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            print(source.formats())</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            print(&quot;has images&quot;, source.hasImage())</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            print(&quot;has urls/uris&quot;, source.hasUrls(), source.urls())</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            if source.hasImage():</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;&quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-10; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                save image data to cache, then some how replace image data with local link to the cached image</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                &quot;&quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                imagedata: QImage = source.imageData()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                if not imagedata:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    return</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                imagePath = path.join(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    cacheLocation, md5(f&quot;{time()}{randint(0, 999)}&quot;.encode(&quot;ascii&quot;)).hexdigest() + &quot;.jpg&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                )</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                imagedata.save(imagePath, &quot;JPG&quot;, 85)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                self.fileAddedSignal.emit(imagePath)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                return self.insertPlainText(f&quot;![pasted image]({imagePath})&quot;)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            if source.hasUrls():  # prob a local file</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                urls: List[QUrl] = source.urls()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                for url in urls:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    # only checking uris starting with &quot;file:///&quot; or uris pointing to local files</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    if (</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        url.isLocalFile()</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    ):  # BUG just checking for isLocalFile() aka &quot;file://&quot; header is not enough, could be a network file</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        imagePath = url.path().strip(&quot;/&quot;).strip(&quot;\\&quot;)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        print(f&quot;parsed uri path: {imagePath}&quot;)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        if not imagePath.endswith((&quot;.jpg&quot;, &quot;.png&quot;, &quot;.bmp&quot;, &quot;.jpeg&quot;)):</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                            return  # ignore non image files</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        _, ext = path.splitext(imagePath)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        imageName = path.basename(imagePath)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        newPath = path.join(cacheLocation, md5(imageName.encode(&quot;ascii&quot;)).hexdigest() + ext)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        print(f&quot;image destination: {newPath}&quot;)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        if not path.isfile(newPath):</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                            os.system(f'{copyCommand} &quot;{cleanSlash(imagePath)}&quot; &quot;{cleanSlash(newPath)}&quot;')</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        self.fileAddedSignal.emit(newPath)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        return self.insertPlainText(f&quot;![{imageName}]({newPath})&quot;)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                    else:</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">                        print(f&quot;url is not a local file uri: {url}&quot;)</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:-2; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#292828;"><span style=" font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98;">            return super().insertFromMimeData(source)‌</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Comic Sans MS'; font-size:10pt; color:#d4be98; background-color:#292828;"><br /></pre></body></html>